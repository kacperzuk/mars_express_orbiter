<!DOCTYPE html>
<html lang="en">
	<head>
		<title>DataAdventures</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="3rdparty/nouislider.min.css">
		<style>
			body {
				color: #000;
				font-family:Monospace;
				font-size:13px;
				text-align:left;
				font-weight: bold;

				background-color: #111;
				margin: 0px;
				overflow: hidden;
			}

			#info {
				color:#eee;
				position: absolute;
				top: 0px; width: 100%;
				padding: 5px;
			}

            #plotc {
                width: 100%;
                background-color: rgba(255,255,255,0.8);
                margin: 0.5em 0;
            }

            #container {
                width: 70%;
            }

			a {
				color: red;
			}
		</style>
	</head>

	<body>
        <div style="position:absolute; width: 30%; right: 0; top: 0">
            <div id="plotc">
                <canvas id="plot1"></canvas>
            </div>
            <div id="plotc">
                <canvas id="plot2"></canvas>
            </div>
            <div id="plotc">
                <canvas id="plot3"></canvas>
            </div>
        </div>
		<div id="container">
            <div style="width: 100%; position: absolute; bottom: 10px;" id="control">
                <div id="slider"></slider>
            </div>
        </div>
		<div id="info">
            Current ts: <span id="ts">N/A</span>
		</div>

        <script src="data.js"></script>

        <script>
            data.max_ts = data.datapoints[data.datapoints.length-1].t;

            var index=Math.floor(data.datapoints.length*0.9),
                dp = data.datapoints[index],
                timestamp = dp.t;

            function timestamp_update(ts) {
                timestamp = ts;
                if (data.datapoints[index+1].t <= ts) {
                    index += 1;
                    dp = data.datapoints[index];
                }

                var c = document.getElementById("ts");
                c.innerText = new Date(timestamp);

                var slider = document.getElementById("slider");
                if(slider.noUiSlider) {
                    slider.noUiSlider.set(100*(timestamp-data.min_ts)/(data.max_ts - data.min_ts));
                }
            }

            function time_p() {
                var a = (timestamp-data.min_ts)/(data.max_ts-data.min_ts);
                return a;
            }
            time_p();
        </script>


		<script src="js/three.js"></script>
		<script src="3rdparty/nouislider.min.js"></script>
        <script src="js/controls.js"></script>

		<script src="js/controls/OrbitControls.js"></script>

		<script src="js/Detector.js"></script>

        <script src="js/loaders/AssimpJSONLoader.js"></script>

        <script src="3rdparty/Chart.bundle.min.js"></script>

        <script src="js/3d.js"></script>
        <script src="js/plots.js"></script>

	</body>
</html>
